# 什么是性能优化

## 遇到性能问题怎么办
* 静
* 让别人觉得你淡定
* 因为你一时半会也解决不了

## 怎么办
* 到底是不是问题
* 是问题，怎么证明是问题
* 梳理思路

## 机器的性能的几个维度
* CPU
* IO
* Memory
* Network

## CPU飙高的情况下，怎么定位问题
* top命令 找到CPU高的那个进程
* jstack pid > info.log
* top命令下，Shift + h切换成线程模式
* 找上面进程对应的线程PID
* 执行命令 printf "%x \n " PID 转换线程pid为16进制x
* vi info.log 
* /x   x-为上面转换的16进制
* 这样就可以定位具体执行的CPU飙高的位置

## 术语
* 术语是为了提高沟通效率的
* 吞吐量
* 平均响应时间
* TPS 每秒事务的吞吐量，一次请求的来回
* qps
* 吞吐量越大，平均响应时间未必越短
* 系统的吞吐量应该是一个综合指标：入口网关 - 应用层 - 服务化 - 缓存 - 数据库

## 扩展
* 关注我们应该关注的事情
* 查看CPU信息	
	* cat /proc/cpuinfo
	* top命令下按1
* 查看系统每秒运行状态	vmstat 1
* free -g
* 验证问题，是最考验的时候
* df -h fileName 看文件大小
* 发送100次请求 for i in [1..100]; do curl localhost:8080/hello; done


