# 跳跃表

## 游戏策划-拍卖行
* 需要做一个拍卖行系统，用来查阅和出售游戏中的道具
* 需要支持四种排序：按价格、按等级、按剩余时间、按出售者的ID
* 基于品类的查询先不要，要支持输入道具名称的精确和输入名称的全量查询

## 拍卖行系统还真不好做，尤其是性能的保障
* 拍卖行的商品总数量有几十万件，对应数据库商品表的几十万条记录。
* 如果是按照商品名称精确查询还好办，可以直接从数据库查出来，最多也就上百条记录。
* 如果是没有商品名称的全量查询怎么办？总不可能把数据库里的所有记录全查出来吧，而且还要支持不同字段的排序。
* 所以，只能提前在内存中存储有序的全量商品集合，每一种排序方式都保存成独立的集合，每次请求的时候按照请求的排序种类，返回对应的集合。
* 比如按价格字段排序的集合：
```
名称		价格		等级
青铜剑	30		5
草药		50		1
铁盾牌	100		10
红宝石	300		2
```
* 比如按等级字段排序的集合：
```
名称		价格		等级
草药		50		1
红宝石	300		2
青铜剑	30		5
铁盾牌	100		10
```
* 需要注意的是，当时还没有Redis这样的内存数据库，所以小灰只能自己实现一套合适的数据结构来存储。
* 拍卖行商品列表是线性的，最容易表达线性结构的自然是数组和链表。可是，无论是数组还是链表，在插入新商品的时候，都会存在性能问题。


> http://mp.weixin.qq.com/s/COBdoHWDhlw4rmG_fGFhSA
